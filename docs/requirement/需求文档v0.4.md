# AI PPTist 图片解构需求文档 v0.4

## 1. 需求背景

### 1.1 项目背景
AI PPTist系统已具备AI生成PPT、图片云存储管理等功能，目前需要实现将现有图片（特别是Google nano/banana/pro生成的精美PPT图片）转化为可编辑幻灯片的功能。

### 1.2 技术趋势
近年来OCR技术、图像分割技术、深度学习模型在文档分析与理解领域发展迅速，为图片解构提供了技术基础。

## 2. 核心需求

### 2.1 总体目标
**将图片转化为可编辑的PPT幻灯片元素**，实现图片PPT的数字化重构。

### 2.2 功能分解

#### 需求1：智能OCR文字识别与转换
- **功能描述**：识别幻灯片图片中的所有文字内容，并将其转换为前端系统的文字元素
- **技术要点**：
  - 支持多语言文字识别（中文、英文等）
  - 准确识别文字位置、字体、颜色、字号等属性
  - 保持文字的原始布局和层级关系
  - 将识别结果转换为前端可编辑元素
- **输出格式**：
  ```json
  {
    "elements": [
      {
        "type": "text",
        "content": "识别出的文字",
        "position": {"x": 100, "y": 150},
        "style": {
          "fontSize": 24,
          "color": "#333333",
          "fontFamily": "Microsoft YaHei"
        },
        "boundingBox": {"width": 300, "height": 50}
      }
    ]
  }
  ```

#### 需求2：文字-图片分离处理
- **功能描述**：从图片中提取文字区域，并擦除图片中的原始文字
- **技术要点**：
  - 精确检测文字区域边界
  - 使用图像修复算法（Inpainting）擦除文字
  - 保持擦除区域与周围背景的视觉一致性
  - 处理复杂背景下的文字擦除（渐变、纹理、图案等）
- **输出**：
  - 修复后的图片（不含文字）
  - 文字位置信息与对应的文本内容

#### 需求3：视觉元素智能提取
- **功能描述**：识别并提取图片中的独立视觉元素（如图标、插图、照片等）
- **技术要点**：
  - 使用图像分割技术识别独立对象
  - 支持图标、矢量图、照片等多种元素类型
  - 保持元素的透明度和原始质量
  - 智能判断元素是否为独立组件
- **输出格式**：
  ```json
  {
    "elements": [
      {
        "type": "image",
        "imageUrl": "提取的元素图片URL",
        "position": {"x": 200, "y": 300},
        "boundingBox": {"width": 150, "height": 150},
        "alpha": true
      }
    ]
  }
  ```

## 3. 功能性需求

### 3.1 OCR识别功能
- [ ] 支持中英文混合文字识别
- [ ] 识别文字样式信息（字体、字号、颜色、加粗/斜体等）
- [ ] 保持原始文字位置和布局信息
- [ ] 支持表格、图表中的文字识别
- [ ] 支持多种文字方向（横向、纵向）

### 3.2 图像修复功能
- [ ] 精确检测文字区域掩码
- [ ] 使用深度学习模型进行图像修复
- [ ] 保持背景连续性
- [ ] 支持修复结果的手动微调

### 3.3 元素提取功能
- [ ] 语义分割识别独立元素
- [ ] 支持图标、插图、照片的分类
- [ ] 生成带透明背景的PNG元素
- [ ] 保持元素原始比例和质量

### 3.4 结构化输出
- [ ] 生成符合前端系统的JSON格式
- [ ] 包含元素层级关系
- [ ] 支持多页幻灯片的批量处理
- [ ] 支持用户手动校正界面

## 4. 非功能性需求

### 4.1 性能要求
- 单张幻灯片处理时间：< 5秒
- 支持批量处理（最多10张）
- 系统资源占用CPU < 60%, 内存 < 4GB

### 4.2 准确率要求
- 文字识别准确率：> 95%
- 文字位置检测准确率：> 90%
- 元素分割准确率：> 85%

### 4.3 扩展性要求
- 支持接入新的OCR引擎
- 支持接入新的图像修复模型
- 支持处理不同格式的输入图片

### 4.4 可用性要求
- 提供可视化校正界面
- 支持撤销/重做操作
- 支持手动调整识别结果
- 支持导出到编辑器

## 5. 用户流程

### 5.1 主流程
1. 用户上传PPT图片或Google nano生成的图片
2. 系统后台启动解构流程
3. 前端显示处理进度
4. 处理完成后展示预览结果
5. 用户可在预览界面校正识别结果
6. 确认后导入到PPT编辑器

### 5.2 异常处理
- 识别失败：提供重试和手动输入选项
- 图像修复质量差：提供手动修复工具
- 元素提取错误：支持手动圈选和提取

## 6. 技术约束

### 6.1 依赖限制
- 优先使用开源模型和库
- 支持离线部署
- 支持Docker容器化

### 6.2 前端兼容性
- 输出格式兼容现有前端系统
- 支持主流浏览器（Chrome, Firefox, Safari, Edge）
- 支持移动端预览（校正功能限制在桌面端）

### 6.3 后端集成
- 与现有FastAPI架构兼容
- 复用现有的图片存储系统（腾讯云COS）
- 符合现有API规范

## 7. 版本规划

### v0.4（当前版本）
- 实现基础OCR识别
- 实现简单背景的文字擦除
- 实现基础元素提取
- 提供手动校正界面

### v0.5（后续版本）
- 支持复杂背景的文字擦除
- 提高元素提取准确率
- 支持图表和表格识别
- 支持批量处理优化

## 8. 验收标准

### 8.1 功能验收
- [ ] 90%以上的文字内容被正确识别
- [ ] 文字在编辑器中保持原始位置和样式
- [ ] 图像修复后无明显瑕疵
- [ ] 提取的元素支持独立编辑

### 8.2 性能验收
- [ ] 平均处理时间 < 5秒/页
- [ ] 系统资源使用在要求范围内
- [ ] 支持并发处理5个请求

### 8.3 用户体验验收
- [ ] 用户可在3步内完成图片上传和解构
- [ ] 校正界面直观易用
- [ ] 提供清晰的操作反馈

## 9. 附录

### 9.1 术语定义
- **解构**：将图片转换为可编辑元素的过程
- **OCR**：光学字符识别技术
- **Inpainting**：图像修复技术
- **语义分割**：将图像分割成语义上有意义的部分

### 9.2 参考文档
- [AI PPTist 系统架构](./arch/AIPPT系统架构_v0.4.md)
- [前端API配置规范](./standard/前端API配置规范.md)

---

**文档版本**: v0.4
**创建日期**: 2025-12-02
**创建者**: AI PPTist 项目团队
